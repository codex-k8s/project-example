# Принципы проектирования

Обязательные принципы для всех языков: DDD + SOLID + DRY + KISS + Clean Architecture.
Главное: архитектура помогает развитию продукта (а не усложняет ради “красоты”).

## DDD (Domain-Driven Design)

Правила:
- Ясные bounded contexts; не смешивать термины/модели разных доменов.
- Ubiquitous language: доменные термины в коде и API.
- Домен первичен; БД/очереди/HTTP — детали.
- Доменная логика не зависит от SQL/HTTP/ORM; границы контекстов проходят по API/событиям (не shared DB/shared tables).

## SOLID

### SRP (Single Responsibility)
- Один модуль/пакет = одна ответственность; сервис = один доменный контекст.

### OCP (Open/Closed)
- Новое поведение — расширением, а не переписыванием; абстракции только при реальной вариативности.

### LSP (Liskov Substitution)
- Реализации строго соблюдают контракт (семантика/ошибки/ограничения).

### ISP (Interface Segregation)
- Интерфейсы узкие и потребитель-ориентированные; лучше несколько маленьких, чем один “толстый”.

### DIP (Dependency Inversion)
- Бизнес-логика зависит от абстракций; инфраструктура реализует и подключается в composition root.

## DRY (Don’t Repeat Yourself)

Правила:
- Один источник правды для повторяющейся логики.
- Общий код — в `libs/`; общие контракты — в `proto/` (не копипаст по сервисам).
- Сигналы нарушения: одинаковые middlewares/клиенты/логгеры в каждом сервисе; копипаст SQL/DTO/валидаций; “почти одинаковые” proto для одной сущности.

## KISS (Keep It Simple, Stupid)

Правила:
- Простые и очевидные решения; избегать over-engineering.
- Абстракции вводить только если они уменьшают сложность.
- Transport тонкий; домен без “магии”; инфраструктура — единый способ подключения/конфигурации.

## Clean Architecture

Правила слоёв:
- Зависимости направлены внутрь: `transport -> application -> domain`; инфраструктура снаружи.
- Домен не импортирует фреймворки транспорта, драйверы БД/ORM, клиентов очередей, конкретные SDK.
- Domain задаёт интерфейсы (порты); infrastructure реализует (адаптеры); composition root склеивает.
- Критерий: бизнес-логику можно тестировать/запускать без реальных БД/очередей (через подмены интерфейсов).
