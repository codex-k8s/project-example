# 03-ai-repair-flow

## Цель
Дать агенту возможность запускаться даже при сбоях развертывания и получать отдельный repair‑контекст для восстановления окружения.

## Что делаем и где
- Добавляем отдельный «repair» сценарий с новым видом промпта.
  - Файлы: `codexctl/internal/prompt/*`, `codexctl/internal/prompt/templates/*`.
- Добавляем режим «минимального старта» окружения (только namespace/config/secret/codex), чтобы агент мог подняться даже при сбоях основного стека.
  - Файлы: `codexctl/internal/cli/manage_env.go` и связанные модули.
- Обновляем воркфлоу, чтобы при неуспешном apply/ensure‑ready агент всё равно запускался в repair‑режиме.
  - Файлы: `project-example/.github/workflows/ai_*.yml`, `Alimentor/.github/workflows/ai_*.yml`.
- Добавляем отдельный триггер `ai-repair` (лейбл) для запуска ремонта по требованию.

## Зачем
- Агент должен иметь возможность отладить причины нестарта прямо в слоте.
- Снижается количество ручных «восстановительных» действий.
- Улучшается надежность автоматизации ai-dev/ai-plan.

## Ожидаемый результат
- При сбое развертывания агент не пропадает и получает инструкцию по восстановлению.
- Repair‑лейбл всегда запускает агента с понятным контекстом.
